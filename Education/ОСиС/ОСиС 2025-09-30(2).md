---
Дата: 2025-09-30
День недели: " вт"
Предмет: ОСиС
Преподаватель: Булдакова Татьяна Владимировна
---
# Конспект

## Файловые системы

> **Файловая система** - способ организации, хранения и именования данных на носителе, она определяет способы хранения, обращения к файлам, управление дисковым пространством, обеспечивает интерфейс взаимодействия с файлами

### Файловые системы с OS Linux

Linux предоставляет более обширный выбор файловой системы для своего устройства, и пользователь может сам "разбить" дисковое пространство и присвоить свои файловые системы для каждого раздела
#### Ext, Ext2, Ext3, Ext4

Ныне самый распространенный выбор файловой системы в Linux
Они отличаются высокой производительностью, отсутствие журналирования(ведение журнала, хранящего списки изменений и помогает сохранять целостность файлов, но при этом замедляет работу), и риском **фрагментации**
>**Фрагментация памяти** - когда общий *объем свободной* памяти достаточен для новой программы или файла, но '*нарезан*' на части с разной *адресацией*, а следовательно *не может* быть *использован* =>`А.Столяров "Введение в операционные системы"`

#### Краткая сводная таблица по файловым системам Linux 

| Файловая система | Характеристика | Плюсы | Минусы |
|------------------|----------------|-------|--------|
| **XFS** | Высокопроизводительная ФС для больших данных и высоких нагрузок | - Высокая производительность с большими файлами<br>- Надежность и стабильность<br>- Онлайн-дефрагментация<br>- Быстрое монтирование | - Сложное восстановление данных при сбоях<br>- Ограниченные возможности сжатия и шифрования<br>- Неэффективна с множеством мелких файлов |
| **Btrfs** | Современная ФС с продвинутыми функциями управления данными | - Снимки (snapshots)<br>- Сжатие данных<br>- RAID-массивы средствами ФС<br>- Контроль целостности данных (checksums) | - Менее стабильна, чем XFS/ext4<br>- Производительность может снижаться при заполнении<br>- Сложнее в администрировании |
| **ZFS** | ФС корпоративного уровня с фокусом на целостность данных | - Высокая надежность данных<br>- Эффективное сжатие<br>- RAID-Z<br>- Дедупликация данных<br>- Снимки и клонирование | - Высокие требования к RAM<br>- Сложная лицензия (не в mainline ядре)<br>- Требует тщательного планирования |
| **F2FS** | Flash-оптимизированная ФС для SSD и накопителей | - Высокая производительность на SSD<br>- Уменьшение износа flash-памяти<br>- Быстрое монтирование | - Низкая производительность на HDD<br>- Меньшая стабильность<br>- Не оптимальна для серверных нагрузок |
| **ReiserFS** | Историческая ФС, оптимизированная для мелких файлов | - Эффективная работа с мелкими файлами<br>- Компактное использование диска<br>- Быстрое монтирование | - Устарела, мало поддерживается<br>- Проблемы со стабильностью в ReiserFS<br>- Не рекомендуется для новых систем |

**Рекомендации:**
- **XFS** - для серверов и больших файлов
- **Btrfs** - для десктопов и систем, требующих снимков
- **ZFS** - для критически важных данных и систем хранения
- **F2FS** - исключительно для SSD и flash-накопителей
### Файловые системы Windows

| Файловая система | Характеристика | Плюсы | Минусы |
|------------------|----------------|-------|--------|
| **NTFS** | Основная ФС для современных версий Windows | - Поддержка больших файлов (>4GB)<br>- Разграничение прав доступа (ACL)<br>- Журналирование<br>- Надежность и стабильность | - Ограниченная совместимость с другими ОС<br>- Фрагментация при длительном использовании<br>- Избыточность для маленьких разделов |
| **FAT32** | Универсальная ФС для совместимости | - Кроссплатформенная совместимость<br>- Поддержка всеми ОС и устройствами<br>- Простота использования | - Ограничение 4GB на файл<br>- Максимум 2TB на раздел<br>- Отсутствие прав доступа<br>- Нет журналирования |
| **exFAT** | Оптимизирована для флеш-накопителей | - Поддержка больших файлов (>4GB)<br>- Совместимость с Windows, Mac, Linux<br>- Легковесная структура | - Отсутствие журналирования<br>- Ограниченная поддержка в старых системах<br>- Меньшая надежность чем NTFS |
| **ReFS** | ФС следующего поколения для серверов | - Устойчивость к повреждениям<br>- Автоматическое исправление ошибок<br>- Поддержка очень больших объемов | - Только для Windows Server<br>- Ограниченная совместимость<br>- Не подходит для загрузочных разделов |
### Файловые системы macOS

| Файловая система | Характеристика | Плюсы | Минусы |
|------------------|----------------|-------|--------|
| **APFS** | Современная ФС Apple для всех устройств | - Оптимизирована для SSD<br>- Мгновенные снимки<br>- Шифрование на уровне ФС<br>- Эффективное клонирование файлов | - Ограниченная совместимость с другими ОС<br>- Не рекомендуется для HDD<br>- Меньшая стабильность на Time Machine |
| **HFS+** | Предыдущая основная ФС macOS | - Полная поддержка macOS<br>- Стабильность и отработанность<br>- Совместимость со старыми Mac | - Устарела (заменена на APFS)<br>- Плохая оптимизация для SSD<br>- Проблемы с датами (2038 год) |
| **Mac OS Extended** | Вариант HFS+ с дополнительными функциями | - Поддержка журналирования<br>- Варианты с шифрованием<br>- Совместимость со старыми версиями OS | - Те же недостатки что и HFS+<br>- Медленнее APFS на SSD |

**Кросс-платформенные решения:**
- **exFAT** - лучший выбор для обмена данными между Windows и Mac
- **FAT32** - максимальная совместимость со всеми устройствами
- **NTFS** (с драйверами) - чтение/запись на Mac через сторонние утилиты

## Хранение и доступ к файлам

Часто, у людей, при словах *хранение файлов* в голове всплывает образ **диска**, хотя те неизбежно устарели
Кратко разберем устройство дисков
**HDD** состоит из:
- **Магнитных пластин** - сами диски, покрытые магнитным слоем, на которые записываются данные(в **Сектора**)
>**Сектор** - минимальная единица хранения данных (512байт = 5Кб(для старых дисков)) 
>Проще говоря, из секторов состоит файловая система диска, представляющая самой адреса ечеек и их значения
- **Считывающая головка**  - подвижный элемент читающий данные из секторов
- **Шпиндель** - вращает пластины 
- **Контроллер** - Управляет работой диска обрабатывает команды и передает данные

>***Диски разделяют на разделы***
>**Раздел** - область смежных секторов объеденных в одну файловую систему
Имеются способы объедения разделов, вместе с одной файловой системой, например организация RAID-массивов, это полезно когда одного диска не достаточно и нужно "подключать второй"

Информация по ныне более популярным SSD-дискам не было дано, и я не стал дополнять ее, так как сам материал достаточно сложен, и пока стоит понять базу

## Методы размещения файлов

>**Методы размещения файла в файловой системе** - подход, связывания файлов в таблицы и использование связанных файлов

| Метод размещения               | Описание                                                                                                                                                          | Плюсы                                                                                                                                                         | Минусы                                                                                                                                                                                          |
| ------------------------------ | ----------------------------------------------------------------------------------------------------------------------------------------------------------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------- | ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| **Непрерывное**                | Файл занимает последовательно идущие блоки диска. В метаданных хранится **только начальный блок и длина**.                                                        | • Высокая скорость доступа (минимальные перемещения головки).  <br>• Простота реализации.                                                                     | • Сильная фрагментация со временем.  <br>• Сложность увеличения размера файла.  <br>• Необходимость указывать размер заранее.                                                                   |
| **Ссылочное (связный список)** | Файл представляется как связный список блоков. Каждый блок содержит данные и **указатель на следующий блок**.                                                     | • Отсутствие внешней фрагментации.  <br>• Легко увеличивать размер файла.  <br>• Эффективное использование свободного пространства.                           | • Медленный **произвольный доступ** (нужно пройти по цепочке).  <br>• Потеря данных при повреждении одного указателя.  <br>• Overhead (тратится место на хранение указателей).                  |
| **С использованием FAT**       | Используется **таблица размещения файлов (FAT)**. Каждая ячейка FAT соответствует блоку диска и указывает на следующий блок файла.                                | • Отсутствие внешней фрагментации.  <br>• Быстрее связного списка, так как FAT загружается в память.  <br>• Надёжнее (вся информация о связях в одном месте). | • **FAT должна находиться в памяти**, что ограничивает размер диска.  <br>• При большом количестве файлов производительность падает.  <br>• Много перемещений головки при сильной фрагментации. |
| **Индексные узлы (i-nodes)**   | Для каждого файла создается специальная структура — **индексный узел (i-node)**, который хранит прямые и косвенные указатели на блоки данных.                     | • Быстрый произвольный доступ.  <br>• Экономия памяти (i-node загружается в память только для открытых файлов).  <br>• Отсутствие ограничений, как у FAT.     | • Ограничение на размер файла числом указателей в i-node.  <br>• Внутренняя фрагментация (последний блок используется не полностью).                                                            |
| **Экстентная**                 | Усовершенствование непрерывного метода. Файл состоит из одного или нескольких **экстентов** — непрерывных областей диска. В метаданных хранится список экстентов. | • Меньше фрагментации, чем у связных методов.  <br>• Хорошая производительность для больших файлов.  <br>• Меньше метаданных для хранения.                    | • Может оставаться внешняя фрагментация.  <br>• Сложность для очень сильно фрагментированных файлов.                                                                                            |